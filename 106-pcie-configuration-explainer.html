<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>106. PCIe Configuration: Slot Configuration and Bifurcation</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #00897B;
    --secondary-color: #26A69A;
    --accent-color: #4DB6AC;
    --bg-color: #E0F2F1;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #B2DFDB;
    --shadow: 0 2px 8px rgba(0, 137, 123, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #00897B, #26A69A);
    color: white;
    position: relative;
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.subtitle {
    font-size: 1.2rem;
    opacity: 0.95;
    font-weight: 300;
}
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.section h3 {
    font-size: 1.6rem;
    margin: 25px 0 15px;
    color: var(--secondary-color);
}
.section p {
    margin-bottom: 18px;
    font-size: 1.05rem;
    line-height: 1.8;
}
.config-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border-left: 5px solid var(--primary-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
}
.config-card h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    font-size: 1.4rem;
}
.concept-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
}
.concept-card h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    font-size: 1.4rem;
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #E0F2F1, #B2DFDB);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
.example-box strong {
    color: var(--primary-color);
    display: block;
    margin-bottom: 10px;
    font-size: 1.1rem;
}
code {
    background: #F5F5F5;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    color: #D32F2F;
}
.command-box {
    background: #263238;
    color: #4DB6AC;
    padding: 20px;
    border-radius: 8px;
    margin: 15px 0;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
}
.comparison-table {
    width: 100%;
    border-collapse: collapse;
    margin: 25px 0;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
}
.comparison-table th,
.comparison-table td {
    padding: 15px 20px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}
.comparison-table th {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    font-weight: 600;
}
.comparison-table tr:hover {
    background: var(--bg-color);
}
footer {
    text-align: center;
    padding: 40px;
    background: #B2DFDB;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    </style>
</head>
<body>
    <header>
        <h1>106. PCIe Configuration</h1>
        <p class="subtitle">PCIe Slot Configuration, Bifurcation, and Lane Allocation</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#pcie-basics" class="nav-link">PCIe Basics</a>
        <a href="#slot-configuration" class="nav-link">Slot Configuration</a>
        <a href="#bifurcation" class="nav-link">Bifurcation</a>
        <a href="#lane-allocation" class="nav-link">Lane Allocation</a>
        <a href="#performance" class="nav-link">Performance</a>
        <a href="#troubleshooting" class="nav-link">Troubleshooting</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>PCIe Configuration Overview</h2>
            <p>
                PCIe (Peripheral Component Interconnect Express) configuration determines how GPUs and other PCIe 
                devices connect to the CPU and system. Proper PCIe configuration ensures optimal GPU performance, 
                correct device detection, and efficient use of available PCIe lanes. Configuration includes slot 
                settings, link width, bifurcation mode, and lane allocation. Understanding PCIe configuration is 
                essential for multi-GPU systems and performance optimization.
            </p>

            <div class="mermaid">
                graph TD
                    A[PCIe Configuration] --> B[Slot Configuration]
                    A --> C[Bifurcation]
                    A --> D[Lane Allocation]
                    A --> E[Link Speed]
                    B --> F[Enable/Disable]
                    B --> G[Link Width]
                    C --> H[x16 Single]
                    C --> I[x8x8 Dual]
                    C --> J[x4x4x4x4 Quad]
                    D --> K[CPU Lanes]
                    D --> L[Chipset Lanes]
                    E --> M[Gen3/Gen4/Gen5]
                    
                    style A fill:#00897B
                    style B fill:#26A69A
                    style C fill:#4DB6AC
            </div>

            <div class="example-box">
                <strong>Configuration Impact:</strong>
                PCIe configuration directly affects GPU bandwidth and performance. A GPU in a x16 Gen4 slot has 
                32 GB/s bandwidth, while the same GPU in a x8 Gen4 slot has 16 GB/s. Incorrect bifurcation 
                settings can prevent GPU detection or limit performance. Proper configuration maximizes GPU 
                performance and system capabilities.
            </div>

            <div class="mermaid">
                mindmap
                  root((PCIe Configuration))
                    PCIe Basics
                      Generations
                      Link Width
                      Bandwidth
                    Slot Configuration
                      Enable/Disable
                      Link Width Settings
                      Slot Priority
                    Bifurcation
                      x16 Single
                      x8x8 Dual
                      x4x4x4x4 Quad
                    Lane Allocation
                      CPU Lanes
                      Chipset Lanes
                      Lane Distribution
                    Performance
                      Bandwidth Calculation
                      Bottleneck Identification
                      Optimization
            </div>
        </section>

        <section id="pcie-basics" class="section">
            <h2>PCIe Fundamentals</h2>
            <p>
                Understanding PCIe basics is essential for proper configuration. PCIe uses serial point-to-point 
                connections with configurable link width and speed.
            </p>

            <div class="mermaid">
                flowchart LR
                    A[PCIe Slot] --> B{Generation?}
                    B -->|Gen3| C[8 GT/s<br/>16 GB/s x16]
                    B -->|Gen4| D[16 GT/s<br/>32 GB/s x16]
                    B -->|Gen5| E[32 GT/s<br/>64 GB/s x16]
                    C --> F[GPU Bandwidth]
                    D --> F
                    E --> F
                    F --> G{Link Width?}
                    G -->|x16| H[Full Bandwidth]
                    G -->|x8| I[50% Bandwidth]
                    G -->|x4| J[25% Bandwidth]
                    
                    style C fill:#FF9800
                    style D fill:#4CAF50
                    style E fill:#2196F3
                    style H fill:#81C784
                    style I fill:#FFB74D
                    style J fill:#F44336
            </div>

            <div class="concept-card">
                <h3>PCIe Generations</h3>
                <p>PCIe has evolved through multiple generations, each doubling bandwidth:</p>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Generation</th>
                            <th>Transfer Rate</th>
                            <th>x16 Bandwidth</th>
                            <th>Use Cases</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>PCIe 3.0</td>
                            <td>8 GT/s</td>
                            <td>~16 GB/s</td>
                            <td>Older GPUs, legacy systems</td>
                        </tr>
                        <tr>
                            <td>PCIe 4.0</td>
                            <td>16 GT/s</td>
                            <td>~32 GB/s</td>
                            <td>Modern GPUs (A100, RTX 30/40 series)</td>
                        </tr>
                        <tr>
                            <td>PCIe 5.0</td>
                            <td>32 GT/s</td>
                            <td>~64 GB/s</td>
                            <td>Latest GPUs (H100), high-performance</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="concept-card">
                <h3>Link Width</h3>
                <p>
                    PCIe links can be x1, x2, x4, x8, or x16 lanes wide. Each lane provides a certain bandwidth, 
                    and total bandwidth is lane width × per-lane bandwidth.
                </p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>x1:</strong> 1 lane, minimal bandwidth (GPUs not recommended)</li>
                    <li><strong>x4:</strong> 4 lanes, limited bandwidth (some GPUs acceptable)</li>
                    <li><strong>x8:</strong> 8 lanes, good bandwidth (acceptable for many GPUs)</li>
                    <li><strong>x16:</strong> 16 lanes, full bandwidth (optimal for GPUs)</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Bandwidth Calculation</h3>
                <p>PCIe bandwidth calculation:</p>
                <div class="command-box">
Bandwidth = (Link Width) × (Per-Lane Transfer Rate) × (Encoding Efficiency)

Example (PCIe 4.0 x16):
Bandwidth = 16 lanes × 16 GT/s × 0.985 (128b/130b encoding)
          = ~32 GB/s (theoretical)
          = ~31.5 GB/s (effective)
                </div>
                <p style="margin-top: 15px;">
                    <strong>Encoding Efficiency:</strong>
                </p>
                <ul style="margin-top: 10px; padding-left: 20px; line-height: 2;">
                    <li>PCIe 1.0-2.0: 8b/10b encoding (80% efficiency)</li>
                    <li>PCIe 3.0-5.0: 128b/130b encoding (98.5% efficiency)</li>
                </ul>
            </div>
        </section>

        <section id="slot-configuration" class="section">
            <h2>PCIe Slot Configuration</h2>
            <p>
                PCIe slot configuration controls how individual slots operate, including enable/disable, link width, 
                and slot priority. Proper slot configuration ensures GPUs are detected and perform optimally.
            </p>

            <div class="config-card">
                <h3>Slot Enable/Disable</h3>
                <p>
                    <strong>Purpose:</strong> Enable or disable specific PCIe slots in BIOS/UEFI.
                </p>
                <p><strong>Location:</strong> Advanced → PCIe/PCI Subsystem Settings → Slot Configuration</p>
                <p><strong>Use Cases:</strong></p>
                <ul style="margin-top: 10px; padding-left: 20px; line-height: 2;">
                    <li>Disable unused slots to free PCIe lanes</li>
                    <li>Enable slots for GPU installation</li>
                    <li>Troubleshoot slot-specific issues</li>
                </ul>
            </div>

            <div class="config-card">
                <h3>Link Width Configuration</h3>
                <p>
                    <strong>Purpose:</strong> Set the number of lanes (link width) for each PCIe slot.
                </p>
                <p><strong>Options:</strong> Auto, x1, x2, x4, x8, x16</p>
                <p><strong>Recommendation:</strong> Auto (allows negotiation to maximum supported)</p>
                <p><strong>Manual Configuration:</strong></p>
                <ul style="margin-top: 10px; padding-left: 20px; line-height: 2;">
                    <li>Use when Auto doesn't work correctly</li>
                    <li>Force specific width for compatibility</li>
                    <li>Optimize lane allocation manually</li>
                </ul>
            </div>

            <div class="config-card">
                <h3>Slot Priority</h3>
                <p>
                    <strong>Purpose:</strong> Set initialization order and resource allocation priority for slots.
                </p>
                <p><strong>Considerations:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Higher priority slots initialize first</li>
                    <li>Affects GPU enumeration order</li>
                    <li>May impact resource allocation</li>
                </ul>
            </div>

            <div class="example-box">
                <strong>Slot Configuration Example:</strong>
                A server with 4 PCIe slots:
                - Slot 1: x16 (GPU 0) - Highest priority
                - Slot 2: x16 (GPU 1) - High priority
                - Slot 3: x8 (GPU 2) - Medium priority
                - Slot 4: x8 (GPU 3) - Medium priority
                Configure slots in BIOS to match GPU placement and performance requirements.
            </div>
        </section>

        <section id="bifurcation" class="section">
            <h2>PCIe Bifurcation</h2>
            <p>
                PCIe bifurcation splits a single x16 slot into multiple smaller slots (x8x8, x4x4x4x4). This allows 
                multiple devices to share a single x16 slot's lanes. Bifurcation is essential for systems with limited 
                PCIe slots but multiple GPUs or other PCIe devices.
            </p>

            <div class="concept-card">
                <h3>Bifurcation Modes</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div class="config-card" style="border-left-color: #00897B;">
                        <h3 style="color: #00897B; margin-bottom: 15px;">x16 Single</h3>
                        <p style="font-size: 0.9rem; color: #666;">
                            No bifurcation. Single device uses all 16 lanes. Standard configuration for single GPU per slot.
                        </p>
                    </div>
                    <div class="config-card" style="border-left-color: #26A69A;">
                        <h3 style="color: #26A69A; margin-bottom: 15px;">x8x8 Dual</h3>
                        <p style="font-size: 0.9rem; color: #666;">
                            Split into two x8 slots. Allows two GPUs or devices in one physical slot (with bifurcation adapter).
                        </p>
                    </div>
                    <div class="config-card" style="border-left-color: #4DB6AC;">
                        <h3 style="color: #4DB6AC; margin-bottom: 15px;">x4x4x4x4 Quad</h3>
                        <p style="font-size: 0.9rem; color: #666;">
                            Split into four x4 slots. Enables four devices in one slot. Less common for GPUs due to bandwidth limits.
                        </p>
                    </div>
                </div>
            </div>

            <div class="concept-card">
                <h3>Bifurcation Requirements</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>CPU Support:</strong> CPU must support bifurcation (most modern CPUs do)</li>
                    <li><strong>BIOS/UEFI Support:</strong> BIOS must support bifurcation configuration</li>
                    <li><strong>Hardware:</strong> Bifurcation adapter/riser card for physical slot splitting</li>
                    <li><strong>Slot Support:</strong> PCIe slot must support bifurcation</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Bifurcation Configuration</h3>
                <p><strong>Location:</strong> Advanced → PCIe/PCI Subsystem Settings → Bifurcation</p>
                <p><strong>Steps:</strong></p>
                <ol style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Identify slot to configure</li>
                    <li>Set bifurcation mode (x16, x8x8, x4x4x4x4)</li>
                    <li>Save and reboot</li>
                    <li>Verify devices are detected correctly</li>
                </ol>
            </div>

            <div class="mermaid">
                graph LR
                    A[x16 Slot] -->|x16 Single| B[1 GPU<br/>16 lanes]
                    A -->|x8x8 Bifurcation| C[2 GPUs<br/>8 lanes each]
                    A -->|x4x4x4x4 Bifurcation| D[4 Devices<br/>4 lanes each]
                    
                    style A fill:#00897B
                    style B fill:#26A69A
                    style C fill:#4DB6AC
                    style D fill:#80CBC4
            </div>

            <div class="example-box">
                <strong>Bifurcation Use Case:</strong>
                A server with 2 x16 CPU PCIe slots can support 4 GPUs using x8x8 bifurcation:
                - Slot 1: x8x8 → GPU 0 (x8) + GPU 1 (x8)
                - Slot 2: x8x8 → GPU 2 (x8) + GPU 3 (x8)
                Each GPU gets x8 bandwidth, which is sufficient for most workloads. Requires bifurcation adapters.
            </div>
        </section>

        <section id="lane-allocation" class="section">
            <h2>PCIe Lane Allocation</h2>
            <p>
                PCIe lanes connect CPU and chipset to PCIe devices. Understanding lane allocation helps optimize 
                GPU placement and performance. CPUs have a limited number of PCIe lanes that must be distributed 
                among slots and devices.
            </p>

            <div class="concept-card">
                <h3>CPU PCIe Lanes</h3>
                <p>Modern CPUs provide PCIe lanes directly connected to the CPU:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Server CPUs:</strong> Typically 48-128 PCIe lanes (Gen4/Gen5)</li>
                    <li><strong>Workstation CPUs:</strong> Typically 16-64 PCIe lanes</li>
                    <li><strong>Consumer CPUs:</strong> Typically 16-28 PCIe lanes</li>
                </ul>
                <p style="margin-top: 15px;">
                    <strong>Common Configurations:</strong>
                </p>
                <ul style="margin-top: 10px; padding-left: 20px; line-height: 2;">
                    <li>EPYC 7003: 128 lanes (Gen4)</li>
                    <li>Xeon Scalable: 64-112 lanes (Gen4)</li>
                    <li>Threadripper Pro: 128 lanes (Gen4)</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Chipset PCIe Lanes</h3>
                <p>
                    Chipsets provide additional PCIe lanes, typically connected via DMI (Desktop Management Interface) 
                    or similar link to the CPU.
                </p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Bandwidth:</strong> Shared bandwidth via chipset link (typically x4 or x8 DMI)</li>
                    <li><strong>Use Cases:</strong> Lower-priority devices, storage, network adapters</li>
                    <li><strong>Limitation:</strong> Not ideal for high-performance GPUs due to shared bandwidth</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Lane Distribution Strategy</h3>
                <p><strong>Best Practices:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Connect GPUs to CPU PCIe lanes (not chipset)</li>
                    <li>Prioritize x16 slots for primary GPUs</li>
                    <li>Use x8 slots for secondary GPUs if needed</li>
                    <li>Reserve chipset lanes for storage, network, other devices</li>
                    <li>Plan lane allocation before hardware installation</li>
                </ul>
            </div>

            <div class="example-box">
                <strong>Lane Allocation Example:</strong>
                Server with 64 CPU PCIe lanes:
                - Slot 1 (CPU): x16 → GPU 0 (16 lanes)
                - Slot 2 (CPU): x16 → GPU 1 (16 lanes)
                - Slot 3 (CPU): x16 → GPU 2 (16 lanes)
                - Slot 4 (CPU): x16 → GPU 3 (16 lanes)
                Total: 64 lanes used. All GPUs on CPU lanes for optimal performance.
            </div>
        </section>

        <section id="performance" class="section">
            <h2>Performance Considerations</h2>
            <p>
                PCIe configuration directly impacts GPU performance. Understanding bandwidth requirements and 
                bottlenecks helps optimize configuration for specific workloads.
            </p>

            <div class="concept-card">
                <h3>Bandwidth Requirements</h3>
                <p>Different workloads have different PCIe bandwidth requirements:</p>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Workload Type</th>
                            <th>PCIe Requirement</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Training (Large Models)</td>
                            <td>x16 Gen4+</td>
                            <td>High data transfer, checkpointing</td>
                        </tr>
                        <tr>
                            <td>Inference</td>
                            <td>x8 Gen4</td>
                            <td>Lower data transfer needs</td>
                        </tr>
                        <tr>
                            <td>Multi-GPU Training</td>
                            <td>x16 Gen4+</td>
                            <td>Inter-GPU communication</td>
                        </tr>
                        <tr>
                            <td>Data Science</td>
                            <td>x8 Gen4</td>
                            <td>Moderate data transfer</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="concept-card">
                <h3>Bottleneck Identification</h3>
                <p>Identify PCIe bottlenecks:</p>
                <div class="command-box">
# Check PCIe link status
nvidia-smi -q -d PCIE

# Look for:
# - Link Width: x16, x8, x4
# - Link Speed: 16.0 GT/s PCIe, 8.0 GT/s PCIe
# - PCIe Generation: 4.0, 3.0

# Monitor PCIe utilization
nvidia-smi dmon -s u -c 60
                </div>
            </div>

            <div class="concept-card">
                <h3>Performance Optimization</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Use highest PCIe generation supported (Gen4/Gen5)</li>
                    <li>Maximize link width (x16 preferred, x8 minimum for GPUs)</li>
                    <li>Connect GPUs to CPU lanes, not chipset</li>
                    <li>Avoid unnecessary bifurcation that reduces bandwidth</li>
                    <li>Monitor PCIe utilization to identify bottlenecks</li>
                </ul>
            </div>
        </section>

        <section id="troubleshooting" class="section">
            <h2>PCIe Configuration Troubleshooting</h2>
            <p>
                Common PCIe configuration issues include incorrect bifurcation settings, lane allocation problems, 
                and link speed limitations. Systematic troubleshooting resolves these issues.
            </p>

            <div class="concept-card">
                <h3>Issue: GPU Not Detected</h3>
                <p><strong>Possible Causes:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Incorrect bifurcation mode</li>
                    <li>Slot disabled in BIOS</li>
                    <li>Insufficient lanes allocated</li>
                    <li>Link width mismatch</li>
                </ul>
                <p><strong>Solutions:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Verify bifurcation mode matches hardware</li>
                    <li>Enable slot in BIOS</li>
                    <li>Check lane allocation</li>
                    <li>Set link width to Auto or correct value</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Issue: Reduced Performance</h3>
                <p><strong>Possible Causes:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Link width limited (x8 instead of x16)</li>
                    <li>Lower PCIe generation (Gen3 instead of Gen4)</li>
                    <li>Bifurcation reducing bandwidth</li>
                    <li>Chipset lanes instead of CPU lanes</li>
                </ul>
                <p><strong>Solutions:</strong></p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li>Verify link width: <code>nvidia-smi -q -d PCIE</code></li>
                    <li>Check PCIe generation</li>
                    <li>Review bifurcation configuration</li>
                    <li>Move GPU to CPU-connected slot</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Verification Commands</h3>
                <div class="command-box">
# Check PCIe link status for all GPUs
nvidia-smi --query-gpu=index,name --format=csv
nvidia-smi -q -d PCIE | grep -A 10 "PCIe"

# Check system PCIe topology
lspci -vv | grep -A 20 -i nvidia

# Verify link width and speed
nvidia-smi -q -d PCIE | grep -E "Link Width|Link Speed|PCIe Generation"
                </div>
            </div>

            <div class="example-box">
                <strong>Configuration Checklist:</strong>
                ✓ Verify all GPU slots are enabled<br>
                ✓ Set appropriate bifurcation mode<br>
                ✓ Configure link width (Auto or specific)<br>
                ✓ Ensure GPUs on CPU PCIe lanes<br>
                ✓ Verify PCIe generation (Gen4/Gen5)<br>
                ✓ Check link status after configuration<br>
                ✓ Monitor performance for bottlenecks
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p>PCIe Configuration | Slot Configuration and Bifurcation</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' }
);
            });
        });

        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }

            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
