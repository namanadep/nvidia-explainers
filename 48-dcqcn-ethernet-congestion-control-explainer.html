<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>48. DCQCN: Data Center Quantized Congestion Notification</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #5E35B1;
    --secondary-color: #7E57C2;
    --accent-color: #9575CD;
    --bg-color: #EDE7F6;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #B39DDB;
    --shadow: 0 2px 8px rgba(94, 53, 177, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #5E35B1, #7E57C2);
    color: white;
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.subtitle {
    font-size: 1.2rem;
    opacity: 0.95;
    font-weight: 300;
}
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.concept-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
}
.concept-card h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    font-size: 1.4rem;
}
.comparison-table {
    width: 100%;
    border-collapse: collapse;
    margin: 25px 0;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
}
.comparison-table th,
.comparison-table td {
    padding: 15px 20px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}
.comparison-table th {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    font-weight: 600;
}
.comparison-table tr:hover {
    background: var(--bg-color);
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #EDE7F6, #D1C4E9);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
.example-box strong {
    color: var(--primary-color);
    display: block;
    margin-bottom: 10px;
    font-size: 1.1rem;
}
footer {
    text-align: center;
    padding: 40px;
    background: #B39DDB;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    </style>
</head>
<body>
    <header>
        <h1>48. DCQCN: Ethernet Congestion Control</h1>
        <p class="subtitle">Data Center Quantized Congestion Notification for AI Networks</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#how-it-works" class="nav-link">How It Works</a>
        <a href="#components" class="nav-link">Components</a>
        <a href="#configuration" class="nav-link">Configuration</a>
        <a href="#benefits" class="nav-link">Benefits</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>DCQCN Overview</h2>
            <p>
                DCQCN (Data Center Quantized Congestion Notification) is a congestion control algorithm designed 
                specifically for Ethernet networks in data centers, particularly those supporting AI and HPC workloads. 
                Unlike traditional TCP congestion control that causes packet loss and retransmission, DCQCN provides 
                lossless operation similar to InfiniBand's credit-based flow control, but adapted for Ethernet. It 
                enables RoCE (RDMA over Converged Ethernet) to achieve InfiniBand-like performance over Ethernet 
                infrastructure, making high-performance networking accessible without requiring InfiniBand hardware.
            </p>

            <div class="mermaid">
                graph TD
                    A[Traditional TCP] --> B[Congestion Detected]
                    B --> C[Packet Loss]
                    C --> D[Retransmission]
                    D --> E[Performance Degradation]
                    
                    F[DCQCN] --> G[Congestion Detected]
                    G --> H[Send CNP]
                    H --> I[Rate Adjustment]
                    I --> J[No Packet Loss]
                    J --> K[Maintain Performance]
                    
                    style A fill:#FF6B6B
                    style F fill:#5E35B1
                    style C fill:#FF6B6B
                    style J fill:#5E35B1
            </div>

            <div class="example-box">
                <strong>Ethernet's Congestion Control:</strong>
                DCQCN brings InfiniBand-like lossless networking to Ethernet. Traditional Ethernet uses TCP's 
                congestion control, which drops packets when congestion occurs, requiring retransmission and 
                degrading performance. DCQCN enables lossless operation by using congestion notification packets 
                (CNP) to signal congestion, allowing senders to adjust rates before packet loss occurs, similar 
                to how credit-based flow control works in InfiniBand.
            </div>

            <div class="mermaid">
                mindmap
                  root((DCQCN))
                    Technology
                      Congestion Notification
                      Rate Adjustment
                      Lossless Operation
                    Components
                      CNP Packets
                      Congestion Detection
                      Rate Limiting
                    Benefits
                      Lossless Ethernet
                      InfiniBand-Like Performance
                      No Packet Loss
                      High Performance
                    Use Cases
                      RoCE Networks
                      AI Training
                      Data Center Ethernet
            </div>
        </section>

        <section id="how-it-works" class="section">
            <h2>How DCQCN Works</h2>
            <p>
                DCQCN operates through a feedback mechanism where switches detect congestion and send congestion 
                notification packets (CNP) to senders, which then adjust their transmission rates. This enables 
                proactive congestion control without packet loss.
            </p>

            <div class="mermaid">
                sequenceDiagram
                    participant Sender
                    participant Switch
                    participant Receiver
                    
                    Sender->>Switch: Send Packets
                    Switch->>Switch: Monitor Buffer
                    Switch->>Switch: Buffer Threshold Exceeded?
                    Switch->>Sender: Send CNP (Congestion Notification)
                    Sender->>Sender: Reduce Transmission Rate
                    Sender->>Switch: Send at Lower Rate
                    Switch->>Switch: Buffer Clears
                    Switch->>Sender: No More CNPs
                    Sender->>Sender: Gradually Increase Rate
                    Note over Sender,Receiver: Lossless Operation<br/>No Packet Drops
            </div>

            <div class="concept-card">
                <h3>DCQCN Process</h3>
                <ol style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Congestion Detection:</strong> Switches detect congestion (buffer threshold exceeded)</li>
                    <li><strong>CNP Generation:</strong> Switches generate Congestion Notification Packets</li>
                    <li><strong>CNP Transmission:</strong> CNPs sent back to source (ECN marking or separate packets)</li>
                    <li><strong>Rate Adjustment:</strong> Source reduces transmission rate based on CNP</li>
                    <li><strong>Rate Recovery:</strong> Rate gradually increases when no congestion</li>
                </ol>
            </div>

            <div class="concept-card">
                <h3>Congestion Detection</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Buffer Threshold:</strong> Switches monitor buffer occupancy</li>
                    <li><strong>Threshold Crossing:</strong> When threshold exceeded, congestion detected</li>
                    <li><strong>Quantization:</strong> Congestion level quantized into discrete levels</li>
                    <li><strong>CNP Rate:</strong> CNP generation rate based on congestion level</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Rate Control Algorithm</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Additive Increase:</strong> Rate increases gradually when no congestion</li>
                    <li><strong>Multiplicative Decrease:</strong> Rate decreases quickly on congestion</li>
                    <li><strong>Fairness:</strong> Ensures fair bandwidth allocation</li>
                    <li><strong>Stability:</strong> Maintains stable operation</li>
                </ul>
            </div>
        </section>

        <section id="components" class="section">
            <h2>DCQCN Components</h2>
            <p>
                DCQCN requires coordination between multiple components: switches that detect and signal congestion, 
                network adapters that respond to congestion signals, and software that implements the rate control algorithm.
            </p>

            <div class="mermaid">
                graph LR
                    A[Switch] --> B[Detect Congestion]
                    B --> C[Generate CNP]
                    C --> D[Network Adapter]
                    D --> E[Receive CNP]
                    E --> F[Adjust Rate]
                    F --> G[Reduce Transmission]
                    
                    style A fill:#5E35B1
                    style D fill:#7E57C2
                    style F fill:#9575CD
            </div>

            <div class="concept-card">
                <h3>Switch Components</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Buffer Monitoring:</strong> Monitor buffer occupancy</li>
                    <li><strong>Threshold Management:</strong> Manage congestion thresholds</li>
                    <li><strong>CNP Generation:</strong> Generate congestion notification packets</li>
                    <li><strong>ECN Support:</strong> Support Explicit Congestion Notification</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Network Adapter Components</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>CNP Processing:</strong> Process received CNP packets</li>
                    <li><strong>Rate Control:</strong> Implement rate control algorithm</li>
                    <li><strong>Rate Limiting:</strong> Limit transmission rate</li>
                    <li><strong>Hardware Support:</strong> Hardware acceleration for rate control</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Software Components</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>DCQCN Driver:</strong> Driver implementing DCQCN algorithm</li>
                    <li><strong>Configuration:</strong> Configuration parameters</li>
                    <li><strong>Monitoring:</strong> Monitoring and statistics</li>
                    <li><strong>Integration:</strong> Integration with RDMA stack</li>
                </ul>
            </div>
        </section>

        <section id="configuration" class="section">
            <h2>DCQCN Configuration</h2>
            <p>
                DCQCN requires proper configuration of switches and network adapters to achieve optimal performance. 
                Key parameters include congestion thresholds, CNP generation rates, and rate control parameters.
            </p>

            <div class="concept-card">
                <h3>Switch Configuration</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Congestion Threshold:</strong> Buffer occupancy threshold for congestion</li>
                    <li><strong>CNP Rate:</strong> Rate at which CNPs are generated</li>
                    <li><strong>ECN Support:</strong> Enable Explicit Congestion Notification</li>
                    <li><strong>PFC Configuration:</strong> Configure Priority Flow Control if used</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Adapter Configuration</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>DCQCN Enable:</strong> Enable DCQCN on adapter</li>
                    <li><strong>Rate Control Parameters:</strong> Configure rate control algorithm</li>
                    <li><strong>CNP Processing:</strong> Configure CNP processing</li>
                    <li><strong>Hardware Acceleration:</strong> Enable hardware rate limiting</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Best Practices</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Consistent Configuration:</strong> Use consistent settings across network</li>
                    <li><strong>Threshold Tuning:</strong> Tune thresholds for workload</li>
                    <li><strong>Monitoring:</strong> Monitor congestion and performance</li>
                    <li><strong>Testing:</strong> Test configuration under load</li>
                </ul>
            </div>
        </section>

        <section id="benefits" class="section">
            <h2>DCQCN Benefits</h2>
            <p>
                DCQCN provides significant advantages for Ethernet-based AI and HPC networks, enabling lossless 
                operation and high performance over standard Ethernet infrastructure.
            </p>

            <div class="concept-card">
                <h3>Lossless Operation</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>No Packet Loss:</strong> Prevents packet loss due to congestion</li>
                    <li><strong>No Retransmission:</strong> Eliminates retransmission overhead</li>
                    <li><strong>Reliable Delivery:</strong> Ensures reliable packet delivery</li>
                    <li><strong>Performance:</strong> Maintains high performance</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Ethernet Compatibility</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Standard Ethernet:</strong> Works with standard Ethernet switches</li>
                    <li><strong>Cost Effective:</strong> Lower cost than InfiniBand</li>
                    <li><strong>Wide Adoption:</strong> Leverages existing Ethernet infrastructure</li>
                    <li><strong>Flexibility:</strong> More flexible deployment options</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Performance Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>High Throughput:</strong> Maintains high throughput</li>
                    <li><strong>Low Latency:</strong> Low latency operation</li>
                    <li><strong>Consistent Performance:</strong> Consistent performance under load</li>
                    <li><strong>Scalability:</strong> Scales to large networks</li>
                </ul>
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Characteristic</th>
                        <th>Traditional TCP</th>
                        <th>DCQCN</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Congestion Control</strong></td>
                        <td>Reactive (after loss)</td>
                        <td>Proactive (before loss)</td>
                    </tr>
                    <tr>
                        <td><strong>Packet Loss</strong></td>
                        <td>Packets dropped</td>
                        <td>No packet loss</td>
                    </tr>
                    <tr>
                        <td><strong>Retransmission</strong></td>
                        <td>Required</td>
                        <td>Not required</td>
                    </tr>
                    <tr>
                        <td><strong>Performance</strong></td>
                        <td>Degrades with congestion</td>
                        <td>Maintains performance</td>
                    </tr>
                    <tr>
                        <td><strong>Latency</strong></td>
                        <td>Higher latency</td>
                        <td>Lower latency</td>
                    </tr>
                </tbody>
            </table>

            <div class="example-box">
                <strong>AI Workload Benefits:</strong>
                DCQCN enables RoCE to achieve performance comparable to InfiniBand for AI training workloads, 
                but over standard Ethernet infrastructure. This makes high-performance networking more accessible 
                and cost-effective, enabling organizations to deploy AI infrastructure without requiring specialized 
                InfiniBand hardware while still achieving excellent performance.
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p>DCQCN Guide | Ethernet Congestion Control</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' }
);
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                }

            });
        });

        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.nav-link');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }

            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
