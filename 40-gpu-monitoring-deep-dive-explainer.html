<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>40. GPU Monitoring: Advanced Monitoring and Profiling Techniques</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #1A237E;
    --secondary-color: #283593;
    --accent-color: #3949AB;
    --bg-color: #E8EAF6;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #9FA8DA;
    --shadow: 0 2px 8px rgba(26, 35, 126, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #1A237E, #283593);
    color: white;
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.subtitle {
    font-size: 1.2rem;
    opacity: 0.95;
    font-weight: 300;
}
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.monitoring-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
}
.monitoring-card h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    font-size: 1.4rem;
}
.command-box {
    background: #263238;
    color: #9FA8DA;
    padding: 20px;
    border-radius: 8px;
    margin: 15px 0;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #E8EAF6, #C5CAE9);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
.example-box strong {
    color: var(--primary-color);
    display: block;
    margin-bottom: 10px;
    font-size: 1.1rem;
}
footer {
    text-align: center;
    padding: 40px;
    background: #9FA8DA;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    </style>
</head>
<body>
    <header>
        <h1>40. GPU Monitoring: Advanced Techniques</h1>
        <p class="subtitle">Beyond nvidia-smi: Comprehensive GPU Monitoring and Profiling</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#continuous" class="nav-link">Continuous Monitoring</a>
        <a href="#alerting" class="nav-link">Alerting</a>
        <a href="#profiling" class="nav-link">Profiling Tools</a>
        <a href="#analysis" class="nav-link">Performance Analysis</a>
        <a href="#integration" class="nav-link">Integration</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>Advanced GPU Monitoring Overview</h2>
            <p>
                While nvidia-smi provides basic GPU monitoring capabilities, production environments require 
                advanced monitoring techniques including continuous monitoring, automated alerting, performance 
                profiling, and integration with monitoring systems. These capabilities enable proactive issue 
                detection, performance optimization, and capacity planning for GPU infrastructure.
            </p>

            <div class="mermaid">
                graph TD
                    A[GPU Monitoring] --> B[Continuous Monitoring]
                    A --> C[Performance Profiling]
                    A --> D[Alerting Systems]
                    A --> E[Integration]
                    
                    B --> B1[Real-time Metrics]
                    B --> B2[Historical Data]
                    
                    C --> C1[Nsight Tools]
                    C --> C2[Application Profiling]
                    
                    D --> D1[Threshold Alerts]
                    D --> D2[Anomaly Detection]
                    
                    E --> E1[Prometheus]
                    E --> E2[Grafana]
                    E --> E3[Datadog]
                    
                    style A fill:#1A237E
                    style B fill:#283593
                    style C fill:#3949AB
                    style D fill:#5C6BC0
                    style E fill:#7986CB
            </div>

            <div class="example-box">
                <strong>Beyond Basic Monitoring:</strong>
                Advanced GPU monitoring goes beyond checking GPU status manually. It involves continuous 
                collection of metrics, automated analysis, proactive alerting, and integration with 
                enterprise monitoring systems. This enables organizations to maintain optimal GPU 
                performance, prevent issues before they impact workloads, and make data-driven decisions 
                about infrastructure scaling.
            </div>

            <div class="mermaid">
                mindmap
                  root((GPU Monitoring))
                    Continuous Monitoring
                      Real-Time Metrics
                      Historical Data
                      Trend Analysis
                    Performance Profiling
                      Nsight Tools
                      Application Profiling
                      Bottleneck Identification
                    Alerting Systems
                      Threshold Alerts
                      Anomaly Detection
                      Automated Notifications
                    Integration
                      Prometheus
                      Grafana
                      Datadog
                      Custom Dashboards
            </div>
        </section>

        <section id="continuous" class="section">
            <h2>Continuous Monitoring</h2>
            <p>
                Continuous monitoring involves collecting GPU metrics at regular intervals and storing them 
                for analysis. This enables trend analysis, capacity planning, and historical performance 
                comparison.
            </p>

            <div class="monitoring-card">
                <h3>nvidia-smi Continuous Mode</h3>
                <p>Monitor GPUs continuously with periodic updates:</p>
                <div class="command-box">
# Monitor every 1 second<br>
nvidia-smi -l 1<br>
<br>
# Monitor every 5 seconds with specific query<br>
nvidia-smi -l 5 --query-gpu=timestamp,name,utilization.gpu,memory.used,memory.total,temperature.gpu --format=csv
                </div>
                <p>The <code>-l</code> flag enables loop mode with specified interval in seconds.</p>
            </div>

            <div class="monitoring-card">
                <h3>dmon: Data Collection Mode</h3>
                <p>nvidia-smi dmon provides detailed monitoring:</p>
                <div class="command-box">
# Monitor GPU and memory utilization<br>
nvidia-smi dmon -s u -c 100<br>
<br>
# Monitor power and temperature<br>
nvidia-smi dmon -s p -c 100<br>
<br>
# Monitor all metrics<br>
nvidia-smi dmon -s ucmpt -c 100
                </div>
                <p>dmon provides more detailed metrics than standard nvidia-smi output.</p>
            </div>

            <div class="mermaid">
                flowchart TD
                    A[GPU Monitoring] --> B[Performance Metrics<br/>Utilization, Memory]
                    A --> C[Health Metrics<br/>Temperature, Power]
                    A --> D[Error Metrics<br/>ECC Errors, Faults]
                    A --> E[Process Metrics<br/>Running Processes]
                    
                    B --> F[Continuous Collection<br/>Real-time & Historical]
                    C --> F
                    D --> F
                    E --> F
                    
                    F --> G[Analysis & Alerting<br/>Thresholds & Anomalies]
                    
                    style A fill:#1A237E
                    style G fill:#3949AB
            </div>

            <div class="mermaid">
                flowchart TD
                    A[Key Metrics] --> B[GPU Utilization<br/>% Time Busy]
                    A --> C[Memory Usage<br/>Used vs Total]
                    A --> D[Temperature<br/>GPU & Memory]
                    A --> E[Power Draw<br/>Consumption]
                    A --> F[Clock Frequencies<br/>GPU & Memory Speed]
                    A --> G[ECC Errors<br/>Memory Errors]
                    A --> H[Process Info<br/>Running Processes]
                    
                    B --> I[Complete Monitoring<br/>System Health]
                    C --> I
                    D --> I
                    E --> I
                    F --> I
                    G --> I
                    H --> I
                    
                    style A fill:#1A237E
                    style I fill:#3949AB
                </div>
        </section>

        <section id="alerting" class="section">
            <h2>Automated Alerting</h2>
            <p>
                Automated alerting systems notify administrators when GPU metrics exceed thresholds or 
                anomalies are detected. This enables proactive issue resolution before problems impact 
                workloads.
            </p>

            <div class="mermaid">
                flowchart TD
                    A[Threshold Alerts] --> B[High Utilization<br/>> 95% Extended]
                    A --> C[Memory Pressure<br/>> 90% Usage]
                    A --> D[Temperature<br/>> 80Â°C]
                    A --> E[Power<br/>Exceeds TDP]
                    A --> F[ECC Errors<br/>Error Detection]
                    
                    B --> G[Alert System<br/>Proactive Monitoring]
                    C --> G
                    D --> G
                    E --> G
                    F --> G
                    
                    style A fill:#1A237E
                    style G fill:#3949AB
                </div>

            <div class="mermaid">
                flowchart TD
                    A[Anomaly Detection] --> B[Sudden Drops<br/>Unexpected Utilization]
                    A --> C[Memory Leaks<br/>Gradual Increase]
                    A --> D[Performance Degradation<br/>Decreasing Throughput]
                    A --> E[Thermal Issues<br/>Increasing Temperature]
                    A --> F[Error Rates<br/>Increasing Errors]
                    
                    B --> G[Anomaly Alert<br/>Issue Detection]
                    C --> G
                    D --> G
                    E --> G
                    F --> G
                    
                    style A fill:#1A237E
                    style G fill:#3949AB
                </div>

            <div class="mermaid">
                flowchart LR
                    A[Alert Channels] --> B[Email<br/>Email Notifications]
                    A --> C[Slack/Teams<br/>Collaboration Tools]
                    A --> D[PagerDuty<br/>On-Call Systems]
                    A --> E[SNMP<br/>Network Management]
                    A --> F[Webhooks<br/>Custom HTTP]
                    
                    style A fill:#1A237E
                    style B fill:#3949AB
                    style C fill:#5C6BC0
                    style D fill:#7986CB
                    style E fill:#9FA8DA
                    style F fill:#C5CAE9
                </div>
        </section>

        <section id="profiling" class="section">
            <h2>Performance Profiling Tools</h2>
            <p>
                Profiling tools provide deep insights into GPU application performance, identifying bottlenecks 
                and optimization opportunities. NVIDIA provides several profiling tools for different use cases.
            </p>

            <div class="monitoring-card">
                <h3>Nsight Systems</h3>
                <p>System-wide performance analysis tool:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Purpose:</strong> System-level performance analysis</li>
                    <li><strong>Use Case:</strong> Understanding overall application performance</li>
                    <li><strong>Features:</strong> Timeline view, CPU-GPU synchronization, memory transfers</li>
                    <li><strong>Command:</strong> <code>nsys profile python train.py</code></li>
                    <li><strong>Output:</strong> Interactive timeline visualization</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Nsight Compute</h3>
                <p>Kernel-level performance analysis:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Purpose:</strong> Detailed kernel performance analysis</li>
                    <li><strong>Use Case:</strong> Optimizing CUDA kernels</li>
                    <li><strong>Features:</strong> SM utilization, memory throughput, occupancy analysis</li>
                    <li><strong>Command:</strong> <code>ncu --set full python train.py</code></li>
                    <li><strong>Output:</strong> Detailed kernel metrics and recommendations</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Nsight Graphics</h3>
                <p>Graphics application profiling:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Purpose:</strong> Graphics application optimization</li>
                    <li><strong>Use Case:</strong> Game and graphics application development</li>
                    <li><strong>Features:</strong> Frame analysis, draw call optimization, shader analysis</li>
                    <li><strong>Interface:</strong> GUI-based profiling tool</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>DCGM: Data Center GPU Manager</h3>
                <p>Enterprise GPU monitoring and management:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Purpose:</strong> Production GPU monitoring and management</li>
                    <li><strong>Features:</strong> Health monitoring, policy engine, telemetry</li>
                    <li><strong>Integration:</strong> Prometheus, Grafana, other monitoring systems</li>
                    <li><strong>Use Case:</strong> Large-scale GPU infrastructure management</li>
                </ul>
            </div>
        </section>

        <section id="analysis" class="section">
            <h2>Performance Analysis</h2>
            <p>
                Effective GPU monitoring enables performance analysis to identify bottlenecks, optimize 
                resource utilization, and improve application performance.
            </p>

            <div class="monitoring-card">
                <h3>Utilization Analysis</h3>
                <p>Analyze GPU utilization patterns:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Low Utilization:</strong> Indicates CPU-bound or I/O-bound workloads</li>
                    <li><strong>High Utilization:</strong> GPU is working efficiently</li>
                    <li><strong>Spiky Patterns:</strong> May indicate synchronization issues</li>
                    <li><strong>Idle Periods:</strong> Opportunity for workload consolidation</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Memory Analysis</h3>
                <p>Analyze memory usage patterns:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Memory Pressure:</strong> High memory usage may limit batch sizes</li>
                    <li><strong>Memory Fragmentation:</strong> Can reduce available memory</li>
                    <li><strong>Memory Leaks:</strong> Gradual increase indicates leaks</li>
                    <li><strong>Peak Usage:</strong> Identify maximum memory requirements</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Thermal Analysis</h3>
                <p>Monitor thermal characteristics:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Temperature Trends:</strong> Identify cooling issues</li>
                    <li><strong>Thermal Throttling:</strong> Performance reduction due to heat</li>
                    <li><strong>Cooling Efficiency:</strong> Evaluate cooling system effectiveness</li>
                    <li><strong>Power Limits:</strong> Temperature may limit power consumption</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Bottleneck Identification</h3>
                <p>Common GPU bottlenecks and indicators:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>CPU Bound:</strong> Low GPU utilization, high CPU usage</li>
                    <li><strong>Memory Bound:</strong> High memory bandwidth usage, low compute utilization</li>
                    <li><strong>I/O Bound:</strong> GPU waiting for data transfers</li>
                    <li><strong>Kernel Bound:</strong> High GPU utilization, may need kernel optimization</li>
                    <li><strong>Synchronization:</strong> Frequent CPU-GPU synchronization overhead</li>
                </ul>
            </div>
        </section>

        <section id="integration" class="section">
            <h2>Monitoring System Integration</h2>
            <p>
                Integrating GPU monitoring with enterprise monitoring systems enables centralized visibility, 
                correlation with other metrics, and unified alerting.
            </p>

            <div class="monitoring-card">
                <h3>Prometheus Integration</h3>
                <p>Export GPU metrics to Prometheus:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>DCGM Exporter:</strong> Export DCGM metrics to Prometheus</li>
                    <li><strong>nvidia-smi Exporter:</strong> Custom exporter for nvidia-smi metrics</li>
                    <li><strong>Metrics:</strong> GPU utilization, memory, temperature, power</li>
                    <li><strong>Query Language:</strong> PromQL for metric queries</li>
                    <li><strong>Alerting:</strong> Prometheus Alertmanager for alerts</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Grafana Dashboards</h3>
                <p>Visualize GPU metrics with Grafana:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Pre-built Dashboards:</strong> NVIDIA-provided Grafana dashboards</li>
                    <li><strong>Custom Dashboards:</strong> Create dashboards for specific needs</li>
                    <li><strong>Visualizations:</strong> Graphs, heatmaps, tables</li>
                    <li><strong>Multi-GPU:</strong> Compare metrics across multiple GPUs</li>
                    <li><strong>Historical Analysis:</strong> Trend analysis over time</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Datadog Integration</h3>
                <p>GPU monitoring with Datadog:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>NVIDIA Integration:</strong> Native Datadog-NVIDIA integration</li>
                    <li><strong>Automatic Discovery:</strong> Auto-discover GPUs</li>
                    <li><strong>Custom Metrics:</strong> Define custom metric collection</li>
                    <li><strong>APM Integration:</strong> Correlate GPU metrics with application traces</li>
                </ul>
            </div>

            <div class="monitoring-card">
                <h3>Custom Integrations</h3>
                <p>Build custom monitoring solutions:</p>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Python Scripts:</strong> Use pynvml for custom monitoring</li>
                    <li><strong>REST APIs:</strong> DCGM provides REST API</li>
                    <li><strong>Webhooks:</strong> Send metrics to custom endpoints</li>
                    <li><strong>Database Storage:</strong> Store metrics in time-series databases</li>
                </ul>
            </div>

            <div class="example-box">
                <strong>Production Monitoring Strategy:</strong>
                For production environments, implement a comprehensive monitoring strategy: use DCGM for 
                enterprise-grade monitoring, integrate with Prometheus for metrics collection, visualize 
                with Grafana dashboards, and set up automated alerting. Combine continuous monitoring 
                with periodic profiling to maintain optimal GPU performance and quickly identify issues.
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p>GPU Monitoring Guide | Advanced Monitoring Techniques</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' }
);
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                }

            });
        });

        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.nav-link');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }

            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
