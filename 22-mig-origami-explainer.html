<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIG: Multi-Instance GPU - GPU Virtualization and Resource Partitioning</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #E91E63;
    --secondary-color: #F06292;
    --accent-color: #FF4081;
    --bg-color: #FFF5F7;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #F8BBD0;
    --shadow: 0 2px 8px rgba(233, 30, 99, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #E91E63, #F06292, #FF4081);
    color: white;
    position: relative;
}
header::before {
    content: '';
    position: absolute;
    font-size: 200px;
    opacity: 0.1;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.origami-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
    transition: all 0.3s ease;
}
.origami-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary-color);
    box-shadow: 0 4px 16px rgba(233, 30, 99, 0.15);
}
.profile-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}
.profile-card {
    background: linear-gradient(135deg, #FFF5F7, #FFFFFF);
    padding: 20px;
    border-radius: 8px;
    border: 2px solid var(--border-color);
    text-align: center;
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #FFF5F7, #FCE4EC);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
footer {
    text-align: center;
    padding: 40px;
    background: #FFF5F7;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    .profile-grid { grid-template-columns: 1fr; }
    
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}
</style>
</head>
<body>
    <header>
        <h1>22. MIG: Multi-Instance GPU</h1>
        <p class="subtitle">GPU Virtualization and Resource Partitioning</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#partitioning" class="nav-link">Partitioning</a>
        <a href="#profiles" class="nav-link">MIG Profiles</a>
        <a href="#isolation" class="nav-link">Hardware Isolation</a>
        <a href="#use-cases" class="nav-link">Use Cases</a>
        <a href="#best-practices" class="nav-link">Best Practices</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>MIG Overview</h2>
            <p>
                Multi-Instance GPU (MIG) is a hardware feature available on NVIDIA A100 and H100 GPUs that 
                enables a single physical GPU to be partitioned into multiple smaller, isolated GPU instances. 
                Each instance operates as an independent GPU with dedicated compute, memory, and memory bandwidth 
                resources. This capability enables multiple users or workloads to share a single GPU while 
                maintaining hardware-level isolation and predictable performance.
            </p>
        </section>

        <section id="partitioning" class="section">
            <h2>GPU Partitioning</h2>
            <p>
                MIG partitions a physical GPU (such as an H100 with 94GB of memory) into multiple smaller GPU 
                instances. Each partition receives dedicated resources including compute units, memory capacity, 
                and memory bandwidth. This partitioning is performed at the hardware level, ensuring complete 
                isolation between instances and preventing resource contention.
            </p>

            <div class="mermaid">
                graph TD
                    A[Physical GPU<br/>H100 94GB] --> B[Origami Paper<br/>Single Sheet]
                    B --> C[Multiple Folds<br/>MIG Partitions]
                    C --> D[Beautiful Shapes<br/>GPU Instances]
                    
                    style A fill:#E91E63
                    style B fill:#F06292
                    style C fill:#FF4081
                    style D fill:#F8BBD0
            </div>

            <div class="example-box">
                <strong>MIG Partitioning:</strong>
                MIG takes one GPU and creates multiple isolated GPU instances through hardware partitioning. 
                Each partition creates a separate GPU instance with dedicated compute, memory, and bandwidth 
                resources. This enables multiple workloads to run simultaneously on a single GPU with 
                complete isolation.
            </div>

            <div class="mermaid">
                mindmap
                  root((MIG))
                    GPU Partitioning
                      Hardware-Level Isolation
                      Dedicated Resources
                      Multiple Instances
                    MIG Profiles
                      Compute Profiles
                      Memory Profiles
                      Bandwidth Profiles
                    Benefits
                      Multi-Tenancy
                      Resource Isolation
                      Predictable Performance
                    Use Cases
                      Cloud Services
                      Multi-User Systems
                      Workload Isolation
            </div>

            <div class="mermaid">
                flowchart TD
                    A[Physical GPU<br/>H100 94GB] --> B{Enable MIG?}
                    B -->|Yes| C[Create MIG Profiles]
                    B -->|No| D[Use Full GPU]
                    
                    C --> E[Partition GPU]
                    E --> F[GPU Instance 1<br/>Dedicated Resources]
                    E --> G[GPU Instance 2<br/>Dedicated Resources]
                    E --> H[GPU Instance N<br/>Dedicated Resources]
                    
                    F --> I[Isolated Workloads]
                    G --> I
                    H --> I
                    
                    style A fill:#E91E63
                    style I fill:#F06292
            </div>
        </section>

        <section id="partitions" class="section">
            <h2>MIG Partitions</h2>
            <p>
                MIG partitions divide the GPU into smaller, isolated instances. Each partition creates a 
                separate GPU instance with dedicated resources, enabling multiple workloads to run simultaneously 
                with complete isolation.
            </p>

            <div class="mermaid">
                flowchart TD
                    A[Physical GPU<br/>H100 94GB] --> B[MIG Enabled]
                    B --> C[Hardware Partitioning]
                    C --> D[Compute Units<br/>Dedicated]
                    C --> E[Memory Slices<br/>Dedicated]
                    C --> F[Bandwidth<br/>Dedicated]
                    
                    D --> G[GPU Instance 1<br/>Isolated]
                    E --> G
                    F --> G
                    
                    D --> H[GPU Instance 2<br/>Isolated]
                    E --> H
                    F --> H
                    
                    style A fill:#E91E63
                    style G fill:#F06292
                    style H fill:#FF4081
            </div>

            <div class="origami-card">
                <h3>How Partitioning Works</h3>
                <p>
                    MIG partitions the GPU along hardware boundaries (compute units, memory slices, bandwidth) 
                    to create isolated instances. Each partition receives dedicated compute resources, memory 
                    capacity, and memory bandwidth. Partitions are isolated at the hardware level, ensuring 
                    complete separation between workloads.
                </p>
            </div>

            <div class="mermaid">
                flowchart LR
                    A[One GPU<br/>94GB] -->|Fold 1| B[Instance 1<br/>12GB]
                    A -->|Fold 2| C[Instance 2<br/>12GB]
                    A -->|Fold 3| D[Instance 3<br/>24GB]
                    A -->|Fold 4| E[Instance 4<br/>47GB]
                    
                    style A fill:#E91E63
                    style B fill:#F06292
                    style C fill:#F06292
                    style D fill:#FF4081
                    style E fill:#F8BBD0
            </div>
        </section>

        <section id="patterns" class="section">
            <h2>üé® The Patterns: MIG Profiles</h2>
            <p>
                MIG provides predefined partition profiles - standardized configurations that define how GPUs are 
                divided into instances. Each profile specifies the number of instances and resource allocation, 
                enabling consistent GPU partitioning across deployments.
            </p>

            <div class="profile-grid">
                <div class="profile-card">
                    <h3>1g.12gb</h3>
                    <p><strong>Design:</strong> Small crane</p>
                    <p>One GPU instance with 12GB memory. Perfect for small workloads or many users.</p>
                </div>
                <div class="profile-card">
                    <h3>2g.24gb</h3>
                    <p><strong>Design:</strong> Medium flower</p>
                    <p>Two GPU instances with 24GB memory. Balanced for medium workloads.</p>
                </div>
                <div class="profile-card">
                    <h3>7g.94gb</h3>
                    <p><strong>Design:</strong> Large dragon</p>
                    <p>Seven GPU instances using full GPU. Maximum partitioning.</p>
                </div>
            </div>

            <div class="mermaid">
                flowchart LR
                    A[MIG Profile] --> B{Profile Type?}
                    B -->|1g.12gb| C[1 Instance<br/>12GB Memory]
                    B -->|2g.24gb| D[2 Instances<br/>24GB Each]
                    B -->|7g.94gb| E[7 Instances<br/>Full GPU]
                    
                    C --> F[Small Workloads<br/>Many Users]
                    D --> G[Medium Workloads<br/>Balanced]
                    E --> H[Maximum Partitioning<br/>Many Small Instances]
                    
                    style A fill:#E91E63
                    style C fill:#F06292
                    style D fill:#FF4081
                    style E fill:#F8BBD0
            </div>

            <div class="example-box">
                <strong>üé® Profile Naming:</strong>
                The naming convention tells you everything: "1g.12gb" means 1 GPU instance with 12GB memory. 
                "2g.24gb" means 2 GPU instances with 24GB memory. It's like reading an origami pattern - 
                the name tells you what you'll create!
            </div>
        </section>

        <section id="magic" class="section">
            <h2> The Magic: Hardware-Level Isolation</h2>
            <p>
                The magic of MIG is hardware-level isolation - like separate rooms in a house. Each partition 
                is completely isolated from others, ensuring security and predictable performance.
            </p>

            <div class="mermaid">
                graph TD
                    A[Physical GPU] --> B[Partition 1<br/>Hardware Isolated]
                    A --> C[Partition 2<br/>Hardware Isolated]
                    A --> D[Partition 3<br/>Hardware Isolated]
                    
                    B --> B1[User 1<br/>Cannot see others]
                    C --> C1[User 2<br/>Cannot see others]
                    D --> D1[User 3<br/>Cannot see others]
                    
                    style A fill:#E91E63
                    style B fill:#F06292
                    style C fill:#FF4081
                    style D fill:#F8BBD0
            </div>

            <div class="origami-card">
                <h3>Why This Magic Matters</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Security:</strong> Like separate rooms - users can't access each other's data</li>
                    <li><strong>Performance:</strong> Guaranteed resources - no "noisy neighbor" problems</li>
                    <li><strong>Multi-tenancy:</strong> Multiple users can share one GPU safely</li>
                    <li><strong>Efficiency:</strong> Better resource utilization than time-slicing</li>
                </ul>
            </div>
        </section>

        <section id="gallery" class="section">
            <h2>üñºÔ∏è The Gallery: Partition Configurations</h2>
            <p>
                Different partition configurations are like different origami art pieces - each beautiful in its 
                own way, each suited for different purposes.
            </p>

            <div class="mermaid">
                graph LR
                    A[94GB GPU] --> B[7x 1g.12gb<br/>Maximum Sharing]
                    A --> C[4x 1g.24gb<br/>Balanced]
                    A --> D[2x 3g.47gb<br/>Larger Instances]
                    A --> E[1x 7g.94gb<br/>Full GPU]
                    
                    style A fill:#E91E63
                    style B fill:#F06292
                    style C fill:#FF4081
                    style D fill:#F8BBD0
                    style E fill:#E91E63
            </div>

            <div class="example-box">
                <strong>üñºÔ∏è Choose Your Design:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Many Small Tasks:</strong> Use 7x 1g.12gb - maximum sharing</li>
                    <li><strong>Balanced Workloads:</strong> Use 4x 1g.24gb - good balance</li>
                    <li><strong>Larger Models:</strong> Use 2x 3g.47gb - more memory per instance</li>
                    <li><strong>Maximum Power:</strong> Use 1x 7g.94gb - full GPU for one task</li>
                </ul>
            </div>
        </section>

        <section id="master-class" class="section">
            <h2>üéì Master Class: Step-by-Step Folding</h2>
            <p>
                Here's how to create your MIG origami masterpiece - step by step instructions for configuring MIG.
            </p>

            <div class="mermaid">
                sequenceDiagram
                    participant User
                    participant Tool
                    participant GPU
                    
                    User->>Tool: nvidia-mig-parted
                    Tool->>GPU: Check current state
                    GPU-->>Tool: Current partitions
                    Tool->>GPU: Create partitions
                    GPU-->>Tool: Partitions created
                    Tool->>User: Configuration complete
                    
                    Note over User,GPU: Like following origami<br/>instructions step by step
            </div>

            <div class="origami-card">
                <h3>The Folding Instructions</h3>
                <ol style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Prepare:</strong> Check GPU capabilities with <code>nvidia-smi mig -lgip</code></li>
                    <li><strong>Design:</strong> Create YAML configuration file with desired partitions</li>
                    <li><strong>Fold:</strong> Apply configuration with <code>nvidia-mig-parted apply</code></li>
                    <li><strong>Verify:</strong> Check partitions with <code>nvidia-smi</code></li>
                    <li><strong>Use:</strong> Assign partitions to users or applications</li>
                </ol>
            </div>

            <div class="example-box">
                <strong>üéì Pro Tip:</strong>
                Just like origami masters practice their folds, MIG configuration takes practice. Start with 
                simple partitions, then experiment with more complex configurations. The nvidia-mig-parted tool 
                is your origami instruction manual!
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p><strong>MIG: The Art of GPU Origami</strong> - Transforming One GPU Into Many Beautiful Partitions</p>
        <p>Like origami, MIG transforms something simple into something beautiful and functional! ü™∑</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' }
);
            });
        });
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-link');
            let current = '';
            sections.forEach(s => {
                if (window.pageYOffset >= s.offsetTop - 100) current = s.getAttribute('id');
            }
);
            navLinks.forEach(l => {
                l.classList.remove('active');
                if (l.getAttribute('href') === `#${current}`) l.classList.add('active');
            });
        });
    </script>
</body>
</html>
