<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPU Bring-up: Initialization and Configuration Process</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #5E35B1;
    --secondary-color: #7E57C2;
    --accent-color: #9575CD;
    --bg-color: #EDE7F6;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #B39DDB;
    --shadow: 0 2px 8px rgba(94, 53, 177, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #5E35B1, #7E57C2);
    color: white;
    position: relative;
}
header::before {
    content: '';
    position: absolute;
    font-size: 200px;
    opacity: 0.1;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.ritual-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
    position: relative;
}
.ritual-card::before {
    content: '';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    opacity: 0.5;
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #EDE7F6, #B39DDB);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
footer {
    text-align: center;
    padding: 40px;
    background: #B39DDB;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}
</style>
</head>
<body>
    <header>
        <h1>13. DPU Bring-up: Initialization and Configuration</h1>
        <p class="subtitle">Systematic Process for Deploying and Configuring BlueField DPUs</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#preparation" class="nav-link">Preparation</a>
        <a href="#commands" class="nav-link">Commands</a>
        <a href="#connection" class="nav-link">Connection</a>
        <a href="#installation" class="nav-link">Installation</a>
        <a href="#configuration" class="nav-link">Configuration</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>DPU Bring-up Overview</h2>
            <p>
                DPU bring-up refers to the process of initializing, configuring, and deploying a BlueField DPU 
                from its factory state to a fully operational infrastructure platform. This process involves 
                hardware detection, firmware installation, network configuration, and software deployment. 
                Proper bring-up is essential for ensuring the DPU functions correctly and integrates seamlessly 
                with the data center infrastructure.
            </p>

            <div class="mermaid">
                graph TD
                    A[DPU<br/>Sacred Object] --> B[Dormant State<br/>Inactive]
                    B --> C[Ritual Needed<br/>Bring-up Process]
                    C --> D[Awakened State<br/>Fully Operational]
                    
                    style A fill:#5E35B1
                    style B fill:#7E57C2
                    style C fill:#9575CD
                    style D fill:#B39DDB
            </div>

            <div class="example-box">
                <strong>Initialization Requirement:</strong>
                DPU hardware arrives in an uninitialized state, requiring configuration and software 
                installation before it can function as an infrastructure platform. The bring-up process 
                transforms raw hardware into a fully operational DPU capable of running infrastructure 
                workloads. This initialization is a critical step that must be completed correctly for 
                the DPU to operate properly.
            </div>

            <div class="mermaid">
                mindmap
                  root((DPU Bring-up))
                    Preparation
                      Environment Check
                      Tool Gathering
                      System Cleanup
                      Network Configuration
                    Hardware Detection
                      Device Identification
                      Status Verification
                    BFB Installation
                      Firmware Deployment
                      Version Verification
                    Network Configuration
                      IP Setup
                      Connectivity
                    Software Deployment
                      DOCA Installation
                      Service Configuration
                    Final Configuration
                      Production Setup
                      Testing
            </div>
        </section>

        <section id="preparation" class="section">
            <h2>Pre-installation Preparation</h2>
            <p>
                Before beginning DPU bring-up, administrators must prepare the environment by verifying 
                system compatibility, gathering required tools and installation media, removing conflicting 
                drivers or software, and ensuring proper network connectivity. Proper preparation ensures 
                a smooth bring-up process and reduces the likelihood of errors during installation.
            </p>

            <div class="mermaid">
                flowchart TD
                    A[DPU Bring-up Process] --> B[Preparation<br/>Environment Check]
                    B --> C[Hardware Detection<br/>Identify DPU]
                    C --> D[BFB Installation<br/>Firmware Deployment]
                    D --> E[Network Configuration<br/>Connectivity Setup]
                    E --> F[Software Deployment<br/>DOCA Installation]
                    F --> G[Final Configuration<br/>Production Setup]
                    G --> H[Operational DPU<br/>Ready for Use]
                    
                    style A fill:#5E35B1
                    style H fill:#B39DDB
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                <div class="ritual-card" style="border-left: 5px solid #5E35B1;">
                    <h3 style="color: #5E35B1; margin-bottom: 15px;">Environment Check</h3>
                    <p><strong>Action:</strong> Verify system compatibility</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Check host system requirements and compatibility before starting.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #7E57C2;">
                    <h3 style="color: #7E57C2; margin-bottom: 15px;">Tool Gathering</h3>
                    <p><strong>Action:</strong> Prepare BFB images</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Download and prepare BlueField Boot images and installation tools.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #9575CD;">
                    <h3 style="color: #9575CD; margin-bottom: 15px;">System Cleanup</h3>
                    <p><strong>Action:</strong> Remove conflicts</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Remove conflicting drivers or existing DPU software.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #B39DDB;">
                    <h3 style="color: #B39DDB; margin-bottom: 15px;">Network Configuration</h3>
                    <p><strong>Action:</strong> Ensure connectivity</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Configure network connectivity for DPU access and management.
                    </p>
                </div>
            </div>

            <div class="mermaid">
                flowchart LR
                    A[Preparation] --> B[Environment Check<br/>Compatibility]
                    A --> C[Tool Gathering<br/>BFB Images]
                    A --> D[System Cleanup<br/>Remove Conflicts]
                    A --> E[Network Config<br/>Connectivity]
                    
                    B --> F[Ready for<br/>Bring-up]
                    C --> F
                    D --> F
                    E --> F
                    
                    style A fill:#5E35B1
                    style F fill:#B39DDB
            </div>

            <div class="mermaid">
                flowchart TD
                    A[Preparation Checklist] --> B[Environment Check<br/>System Compatibility]
                    A --> C[Tool Gathering<br/>BFB Images]
                    A --> D[System Cleanup<br/>Remove Conflicts]
                    A --> E[Network Config<br/>Connectivity]
                    
                    B --> F[Ready for<br/>DPU Bring-up]
                    C --> F
                    D --> F
                    E --> F
                    
                    style A fill:#5E35B1
                    style F fill:#B39DDB
                </div>

            <div class="code-example">
# Example: DPU Bring-up Workflow
# 1. Check system compatibility
lspci | grep -i mellanox
dmesg | grep -i bluefield

# 2. Download BFB image
wget https://example.com/bfb/bfb-image.img

# 3. Install BFB to DPU
mlxbf-bootctl --bfb bfb-image.img --index 0

# 4. Connect to DPU
ssh admin@dpu-ip-address

# 5. Verify installation
doca_version
nvidia-smi

# 6. Configure network
nmcli connection modify eth0 ipv4.addresses 192.168.1.100/24
nmcli connection up eth0
            </div>
        </section>

        <section id="commands" class="section">
            <h2>Bring-up Commands</h2>
            <p>
                DPU bring-up involves executing specific commands in sequence to detect hardware, install 
                firmware, configure networking, and deploy software. Each command performs a specific 
                function in the bring-up process, and they must be executed in the correct order for 
                successful initialization.
            </p>

            <div class="mermaid">
                graph LR
                    A[Incantations<br/>Commands] --> B[mst status<br/>Check Device]
                    A --> C[bfb-install<br/>Install BFB]
                    A --> D[bfver<br/>Verify Version]
                    A --> E[Configuration<br/>Set Identity]
                    
                    style A fill:#5E35B1
            </div>

            <div class="example-box">
                <strong>Command Sequence:</strong>
                DPU bring-up commands must be executed in the correct sequence with proper syntax. 
                <code>mst status</code> detects and displays DPU devices, <code>bfb-install</code> 
                installs the BlueField Boot firmware image, <code>bfver</code> verifies the installed 
                firmware version. Each command performs a specific function in the bring-up process, 
                and proper execution is essential for successful DPU initialization.
            </div>

            <div class="mermaid">
                sequenceDiagram
                    participant Admin as Administrator
                    participant Host as Host System
                    participant DPU as DPU Hardware
                    participant Network as Network
                    
                    Admin->>Host: Check System Compatibility
                    Host->>DPU: Detect Hardware (mst status)
                    DPU-->>Host: Device Found
                    Admin->>Host: Install BFB (bfb-install)
                    Host->>DPU: Deploy Firmware
                    DPU-->>Host: Installation Complete
                    Admin->>DPU: Verify Version (bfver)
                    DPU-->>Admin: Version Confirmed
                    Admin->>Network: Configure Network
                    Network->>DPU: Establish Connectivity
                    DPU-->>Admin: DPU Operational
            </div>
        </section>

        <section id="connection" class="section">
            <h2>RShim Connection</h2>
            <p>
                RShim (Remote Shell Interface) provides the communication channel between the host system 
                and the DPU. This interface enables remote access to the DPU for configuration, management, 
                and troubleshooting. Establishing RShim connectivity is a prerequisite for DPU bring-up 
                and ongoing management operations.
            </p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                <div class="ritual-card" style="border-left: 5px solid #5E35B1;">
                    <h3 style="color: #5E35B1; margin-bottom: 15px;">RShim Service</h3>
                    <p><strong>Action:</strong> Start connection service</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Initialize the remote shell interface for DPU communication.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #7E57C2;">
                    <h3 style="color: #7E57C2; margin-bottom: 15px;">Network Configuration</h3>
                    <p><strong>Action:</strong> Set up IP addresses</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Configure network settings for DPU access and management.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #9575CD;">
                    <h3 style="color: #9575CD; margin-bottom: 15px;">SSH Access</h3>
                    <p><strong>Action:</strong> Connect to DPU</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Establish secure shell connection for remote management.
                    </p>
                </div>

                <div class="ritual-card" style="border-left: 5px solid #B39DDB;">
                    <h3 style="color: #B39DDB; margin-bottom: 15px;">Console Access</h3>
                    <p><strong>Action:</strong> Direct console connection</p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        Direct console access for low-level configuration and debugging.
                    </p>
                </div>
            </div>

            <div class="ritual-card">
                <h3>Establishing the Link</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>RShim Service:</strong> Start the connection service</li>
                    <li><strong>Network Configuration:</strong> Set up IP addresses</li>
                    <li><strong>SSH Access:</strong> Connect to the DPU</li>
                    <li><strong>Console Access:</strong> Direct console connection</li>
                </ul>
            </div>
        </section>

        <section id="installation" class="section">
            <h2>BFB Installation</h2>
            <p>
                BFB (BlueField Boot) installation is the critical step that loads the DPU firmware and 
                operating system onto the device. This process transforms the DPU from uninitialized 
                hardware into a functional platform capable of running DOCA applications and providing 
                infrastructure services. Successful BFB installation is essential for DPU operation.
            </p>

            <div class="mermaid">
                sequenceDiagram
                    participant Ritual
                    participant DPU
                    participant BFB
                    participant Life
                    
                    Ritual->>DPU: Prepare Device
                    Ritual->>BFB: Load Bundle
                    BFB->>DPU: Install Firmware
                    DPU->>Life: Awaken!
                    
                    Note over Ritual,Life: BFB Installation<br/>Device Activation
            </div>

            <div class="example-box">
                <strong>BFB Installation:</strong>
                The BFB installation is the critical step that transforms the DPU from uninitialized 
                hardware to an active, functional device. During BFB installation, firmware is loaded, 
                hardware is initialized, and the DPU becomes operational. This is the key step that 
                enables the DPU to perform its functions.
            </div>
        </section>

        <section id="configuration" class="section">
            <h2>Final Configuration</h2>
            <p>
                Final configuration completes the bring-up process by configuring network, storage, 
                security settings, and optimizing the device for production use. This ensures the 
                DPU is fully operational and ready for deployment.
            </p>

            <div class="ritual-card">
                <h3>Configuration Steps</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Network Configuration:</strong> Set IP addresses, VLANs, routing</li>
                    <li><strong>Storage Configuration:</strong> Configure NVMe-oF, storage pools</li>
                    <li><strong>Security Settings:</strong> Set up firewalls, access controls</li>
                    <li><strong>Testing:</strong> Verify all functions work correctly</li>
                    <li><strong>Performance Tuning:</strong> Optimize for workload requirements</li>
                    <li><strong>Documentation:</strong> Record configuration for maintenance</li>
                    <li><strong>Production Ready:</strong> Device is configured and ready for deployment</li>
                </ul>
            </div>

            <div class="example-box">
                <strong>Production Readiness:</strong>
                After final configuration, the DPU is production-ready. All settings are configured, 
                functionality is verified, and the device is optimized for its intended workload. 
                The DPU is ready to be deployed in the data center and begin serving infrastructure 
                workloads.
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p><strong>DPU Bring-up Process</strong> - From Hardware to Production</p>
        <p>Complete bring-up process: initialization, firmware installation, and configuration</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' }
);
            });
        });
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-link');
            let current = '';
            sections.forEach(s => {
                if (window.pageYOffset >= s.offsetTop - 100) current = s.getAttribute('id');
            }
);
            navLinks.forEach(l => {
                l.classList.remove('active');
                if (l.getAttribute('href') === `#${current}`) l.classList.add('active');
            });
        });
    </script>
</body>
</html>
