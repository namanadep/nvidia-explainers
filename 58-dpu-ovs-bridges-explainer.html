<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>58. DPU OVS Bridges: Network Virtualization on DPU</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --primary-color: #6A1B9A;
    --secondary-color: #8E24AA;
    --accent-color: #AB47BC;
    --bg-color: #F3E5F5;
    --card-bg: #FFFFFF;
    --text-color: #1A1A1A;
    --border-color: #CE93D8;
    --shadow: 0 2px 8px rgba(106, 27, 154, 0.1);
}
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}
header {
    text-align: center;
    padding: 50px 40px;
    background: linear-gradient(135deg, #6A1B9A, #8E24AA);
    color: white;
}
header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 12px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}
.subtitle {
    font-size: 1.2rem;
    opacity: 0.95;
    font-weight: 300;
}
.author-credit {
    font-size: 1rem;
    font-weight: 600;
    margin-top: 15px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.sidebar-wrapper {
    display: flex;
    min-height: calc(100vh - 200px);
}
.nav-menu {
    width: 280px;
    min-width: 280px;
    background: #80DEEA;
    border-right: 2px solid var(--border-color);
    padding: 20px 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 200px);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.nav-link {
    color: var(--text-color);
    text-decoration: none;
    padding: 12px 20px;
    margin: 0 10px;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-weight: 500;
    display: block;
}
.nav-link:hover, .nav-link.active {
    background: var(--primary-color);
    color: white;
}
.main-content-wrapper {
    flex: 1;
    width: calc(100% - 280px);
    min-width: 0;
}

.section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
.section h2 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 10px;
}
.concept-card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    margin: 20px 0;
    box-shadow: var(--shadow);
}
.concept-card h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    font-size: 1.4rem;
}
.command-box {
    background: #263238;
    color: #CE93D8;
    padding: 20px;
    border-radius: 8px;
    margin: 15px 0;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
}
.mermaid { margin: 30px 0; text-align: center; }
.example-box {
    background: linear-gradient(135deg, #F3E5F5, #E1BEE7);
    border-left: 5px solid var(--primary-color);
    padding: 20px 25px;
    margin: 20px 0;
    border-radius: 8px;
}
.example-box strong {
    color: var(--primary-color);
    display: block;
    margin-bottom: 10px;
    font-size: 1.1rem;
}
footer {
    text-align: center;
    padding: 40px;
    background: #CE93D8;
    border-top: 2px solid var(--border-color);
    color: var(--text-color);
}
@media (max-width: 768px) {
    header h1 { font-size: 2rem; }
    
    .nav-menu {
        width: 100%;
        min-width: 100%;
        height: auto;
        position: relative;
        flex-direction: row;
        flex-wrap: wrap;
        padding: 10px;
        border-right: none;
        border-bottom: 2px solid var(--border-color);
    }
    .nav-link {
        padding: 8px 15px;
        margin: 4px;
    }
    
    .section { padding: 25px 20px; }
}
    .section {
    padding: 40px;
    min-height: calc(100vh - 200px);
    border-bottom: 1px solid var(--border-color);
    max-width: 100%;
}
    </style>
</head>
<body>
    <header>
        <h1>58. DPU OVS Bridges</h1>
        <p class="subtitle">Network Virtualization with Open vSwitch on DPU</p>
        <p class="author-credit">Explained by Naman Adep</p>
    </header>

    <div class="sidebar-wrapper">
    <nav class="nav-menu">
        <a href="#overview" class="nav-link active">Overview</a>
        <a href="#ovs-on-dpu" class="nav-link">OVS on DPU</a>
        <a href="#asap2" class="nav-link">ASAP² Offloading</a>
        <a href="#bridge-management" class="nav-link">Bridge Management</a>
        <a href="#benefits" class="nav-link">Benefits</a>
    </nav>
    <div class="main-content-wrapper">
        <main>
        <section id="overview" class="section">
            <h2>DPU OVS Bridges Overview</h2>
            <p>
                DPU OVS (Open vSwitch) bridges enable network virtualization on BlueField DPUs, providing software-defined 
                networking capabilities with hardware acceleration. OVS running on DPU can create virtual bridges, manage 
                network flows, and perform packet forwarding, all while offloading processing to DPU hardware for optimal 
                performance. This enables efficient network virtualization for virtualized and containerized workloads, 
                providing the benefits of software-defined networking with the performance of hardware acceleration.
            </p>

            <div class="mermaid">
                graph TD
                    A[Host Applications] --> B[OVS Bridge on DPU]
                    B --> C[ASAP² Offloading]
                    C --> D[DPU Hardware]
                    D --> E[Network Ports]
                    
                    B --> F[Flow Tables]
                    B --> G[Packet Processing]
                    B --> H[Virtual Interfaces]
                    
                    style A fill:#6A1B9A
                    style B fill:#8E24AA
                    style C fill:#AB47BC
                    style D fill:#CE93D8
            </div>

            <div class="example-box">
                <strong>Network Virtualization:</strong>
                DPU OVS bridges function as virtual network switches running on the DPU's ARM cores. These virtual switches 
                connect virtual interfaces, manage network flows, and forward packets, with operations accelerated by DPU 
                hardware. This provides the flexibility of software-defined networking with the performance benefits of 
                hardware acceleration.
            </div>

            <div class="mermaid">
                mindmap
                  root((DPU OVS Bridges))
                    Technology
                      Virtual Network Switches
                      Software-Defined Networking
                      Hardware Acceleration
                    Capabilities
                      Flow Management
                      Packet Forwarding
                      Interface Connection
                    Performance
                      Line-Rate Forwarding
                      Microsecond Latency
                      Low CPU Usage
                    Use Cases
                      Network Virtualization
                      Virtualized Environments
                      Containerized Environments
            </div>
        </section>

        <section id="ovs-on-dpu" class="section">
            <h2>OVS on DPU</h2>
            <p>
                Open vSwitch running on DPU provides network virtualization capabilities directly on the DPU's ARM cores. 
                This enables network functions to run close to the network hardware, reducing latency and improving performance.
            </p>

            <div class="mermaid">
                flowchart TD
                    A[OVS Architecture on DPU] --> B[OVS Daemon<br/>Running on DPU]
                    A --> C[OVS Database<br/>Configuration]
                    A --> D[DPU Integration<br/>Hardware Integration]
                    A --> E[Hardware Offloading<br/>ASAP² Acceleration]
                    
                    style A fill:#6A1B9A
                    style B fill:#8E24AA
                    style C fill:#AB47BC
                    style D fill:#BA68C8
                    style E fill:#CE93D8
                </div>

            <div class="concept-card">
                <h3>OVS Benefits on DPU</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Hardware Acceleration:</strong> Hardware-accelerated forwarding</li>
                    <li><strong>Low Latency:</strong> Reduced latency vs host-based OVS</li>
                    <li><strong>CPU Offload:</strong> Offloads processing from host CPU</li>
                    <li><strong>High Performance:</strong> High-performance packet processing</li>
                </ul>
            </div>

            <div class="mermaid">
                flowchart TD
                    A[OVS Components] --> B[ovs-vswitchd<br/>Switch Daemon]
                    A --> C[ovsdb-server<br/>Database Server]
                    A --> D[ovs-vsctl<br/>Control Utility]
                    A --> E[Flow Tables<br/>Packet Matching]
                    
                    style A fill:#6A1B9A
                    style B fill:#8E24AA
                    style C fill:#AB47BC
                    style D fill:#BA68C8
                    style E fill:#CE93D8
                </div>
        </section>

        <section id="asap2" class="section">
            <h2>ASAP² Offloading</h2>
            <p>
                ASAP² (Accelerated Switching and Packet Processing) enables hardware acceleration of OVS operations on DPU. 
                This offloads packet processing from software to DPU hardware, dramatically improving performance.
            </p>

            <div class="mermaid">
                graph LR
                    A[Packet Arrives] --> B{Flow in Table?}
                    B -->|Yes| C[ASAP² Hardware<br/>Fast Path]
                    B -->|No| D[OVS Software<br/>Slow Path]
                    D --> E[Add Flow]
                    E --> C
                    C --> F[Forward Packet]
                    
                    style A fill:#6A1B9A
                    style C fill:#8E24AA
                    style D fill:#AB47BC
            </div>

            <div class="concept-card">
                <h3>ASAP² Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Hardware Acceleration:</strong> Hardware-accelerated forwarding</li>
                    <li><strong>High Throughput:</strong> Line-rate packet forwarding</li>
                    <li><strong>Low Latency:</strong> Microsecond latency</li>
                    <li><strong>CPU Offload:</strong> Minimal CPU usage</li>
                </ul>
            </div>

            <div class="mermaid">
                flowchart TD
                    A[ASAP² Operation] --> B[Flow Learning<br/>First Packet Software]
                    B --> C[Flow Installation<br/>Install in Hardware]
                    C --> D[Hardware Forwarding<br/>Subsequent Packets]
                    D --> E[Flow Updates<br/>Automatic Updates]
                    
                    style A fill:#6A1B9A
                    style E fill:#8E24AA
                </div>

            <div class="mermaid">
                flowchart LR
                    A[Performance Impact] --> B[Without ASAP²<br/>Software, Limited]
                    A --> C[With ASAP²<br/>Hardware, Line-Rate]
                    A --> D[Improvement<br/>10-100x Faster]
                    A --> E[CPU Savings<br/>90%+ Reduction]
                    
                    style A fill:#6A1B9A
                    style B fill:#FF6B6B
                    style C fill:#8E24AA
                    style D fill:#AB47BC
                    style E fill:#BA68C8
                </div>
        </section>

        <section id="bridge-management" class="section">
            <h2>Bridge Management</h2>
            <p>
                Managing OVS bridges on DPU involves creating bridges, adding ports, configuring flows, and monitoring 
                bridge operation. This is typically done using OVS command-line tools.
            </p>

            <div class="concept-card">
                <h3>Bridge Creation</h3>
                <p>Create OVS bridge on DPU:</p>
                <div class="command-box">
# Create bridge<br>
ovs-vsctl add-br br0<br>
<br>
# Add physical port<br>
ovs-vsctl add-port br0 enp3s0f0<br>
<br>
# Add virtual port<br>
ovs-vsctl add-port br0 veth0
                </div>
            </div>

            <div class="concept-card">
                <h3>Flow Management</h3>
                <p>Manage flows in OVS bridge:</p>
                <div class="command-box">
# Add flow<br>
ovs-ofctl add-flow br0 "in_port=1,actions=output:2"<br>
<br>
# Show flows<br>
ovs-ofctl dump-flows br0<br>
<br>
# Delete flow<br>
ovs-ofctl del-flows br0 "in_port=1"
                </div>
            </div>

            <div class="concept-card">
                <h3>Bridge Configuration</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Port Configuration:</strong> Configure bridge ports</li>
                    <li><strong>Flow Rules:</strong> Configure flow rules</li>
                    <li><strong>QoS:</strong> Configure Quality of Service</li>
                    <li><strong>Monitoring:</strong> Monitor bridge statistics</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Monitoring</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Bridge Status:</strong> Check bridge status</li>
                    <li><strong>Port Statistics:</strong> Monitor port statistics</li>
                    <li><strong>Flow Statistics:</strong> Monitor flow statistics</li>
                    <li><strong>Performance:</strong> Monitor bridge performance</li>
                </ul>
            </div>
        </section>

        <section id="benefits" class="section">
            <h2>DPU OVS Benefits</h2>
            <p>
                Running OVS on DPU with ASAP² offloading provides significant benefits for network virtualization, 
                including improved performance, reduced CPU usage, and better scalability.
            </p>

            <div class="concept-card">
                <h3>Performance Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>High Throughput:</strong> Line-rate packet forwarding</li>
                    <li><strong>Low Latency:</strong> Microsecond latency</li>
                    <li><strong>Hardware Acceleration:</strong> Hardware-accelerated operations</li>
                    <li><strong>Scalability:</strong> Scales to high port counts</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>CPU Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>CPU Offload:</strong> Offloads processing from host CPU</li>
                    <li><strong>Reduced Usage:</strong> 90%+ reduction in CPU usage</li>
                    <li><strong>Host Availability:</strong> More CPU available for applications</li>
                    <li><strong>Efficiency:</strong> Better overall system efficiency</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Network Virtualization Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Flexibility:</strong> Software-defined networking flexibility</li>
                    <li><strong>Programmability:</strong> Programmable network functions</li>
                    <li><strong>Isolation:</strong> Network isolation for workloads</li>
                    <li><strong>Management:</strong> Centralized network management</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Use Case Benefits</h3>
                <ul style="margin-top: 15px; padding-left: 20px; line-height: 2;">
                    <li><strong>Virtualized Environments:</strong> Efficient VM networking</li>
                    <li><strong>Container Networking:</strong> High-performance container networking</li>
                    <li><strong>Cloud Infrastructure:</strong> Cloud-scale networking</li>
                    <li><strong>SDN Deployments:</strong> Software-defined networking</li>
                </ul>
            </div>

            <div class="example-box">
                <strong>Performance Impact:</strong>
                DPU OVS with ASAP² offloading can achieve line-rate packet forwarding (200+ Gb/s) with microsecond 
                latency, while using minimal CPU resources. This enables high-performance network virtualization 
                without impacting host CPU availability, making it ideal for virtualized and containerized environments 
                requiring high network performance.
            </div>
        </section>
            </main>

            </div>
</div>

    <footer>
        <p>DPU OVS Bridges Guide | Network Virtualization on DPU</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' }
);
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                }

            });
        });

        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.nav-link');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }

            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
